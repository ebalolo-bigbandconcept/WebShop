<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Devis Artech Sécurité</title>
<style>
  @page {
    size: A4;
    margin: 1cm;
  }
  body {
    font-family: Arial, sans-serif;
    font-size: 12px;
    color: #222;
  }

  /* Container for header */
  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
  }
  .header img {
    height: 60px;
  }
  .header .date {
    font-size: 12px;
  }

  /* Company + Client info side by side */
  .info-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
  }
  .info-box {
    width: 48%;
  }
  .info-box strong {
    font-weight: bold;
  }

  /* Contact and legal info */
  .contact-legal {
    margin-bottom: 15px;
    font-size: 11px;
    line-height: 1.3;
  }
  .contact-legal a {
    color: #0072c6;
    text-decoration: none;
  }

  /* Main table styles */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 10px;
    font-size: 12px;
  }
  th, td {
    border: 1px solid #000;
    padding: 6px 8px;
    text-align: center;
  }
  th {
    background-color: #4f688b;
    color: white;
  }
  tbody tr:nth-child(even) {
    background-color: #efefef;
  }
  td.left-align {
    text-align: left;
  }

  /* Totals summary table (right aligned) */
  .totals {
    width: 35%;
    float: right;
    border: none;
    border-collapse: collapse;
  }
  .totals td {
    border: 1px solid #000;
    padding: 6px 8px;
  }
  .totals tr:first-child td,
  .totals tr:nth-child(2) td {
    border-bottom: none;
  }
  .totals tr:last-child td {
    font-weight: bold;
  }
  .totals td:first-child {
    text-align: left;
  }
  .totals td:last-child {
    text-align: right;
  }

  /* Payment options table */
  .payment-options {
    width: 30%;
    border-collapse: collapse;
    margin-bottom: 15px;
    margin-top: 110px;
  }
  .payment-options td, .payment-options th {
    border: 1px solid #000;
    padding: 5px 8px;
    font-size: 12px;
  }
  .payment-options th {
    font-weight: bold;
  }
  .payment-note {
    font-size: 11px;
    line-height: 1.3;
    padding-left: 32%;
    margin-top: -45px;
    margin-bottom: 30px;
  }

  /* Footer with page number */
  footer {
    position: fixed;
    bottom: 10px;
    left: 0;
    right: 0;
    text-align: center;
    font-size: 11px;
    color: #555;
  }
  .page-number:after {
    content: "1/1";
  }
</style>
</head>
<body>

<header class="header">
  <img src="logo.jpg" alt="Artech Sécurité Logo" />
  <div class="date">A Vitry-Le-François, Le {{ devis.date }}</div>
</header>

<section class="info-row">
  <div class="info-box">
    <strong>Artech Sécurité</strong><br />
    6 Route Varennes,<br />
    55840 Thierville Sur Meuse<br />
    06 08 78 43 81
  </div>
  <div class="info-box">
    <strong>{{ devis.client.nom }} {{ devis.client.prenom }}</strong><br />
    {{ devis.client.rue }}<br />
    {{ devis.client.code_postal }} {{ devis.client.ville }}<br />
    {{ devis.client.telephone }}
  </div>
</section>

<section class="contact-legal">
  <a href="mailto:artechsecurite@gmail.com">artechsecurite@gmail.com</a><br />
  TVA :<br />
  IBAN :<br />
  Siret : 98773262500023 APRM : 4321A
</section>

<table>
  <thead>
    <tr>
      <th>Désignation</th>
      <th>Quantité</th>
      <th>Prix Unitaire HT</th>
      <th>Prix Total HT</th>
    </tr>
  </thead>
  <tbody>
    {% for item in devis.articles %}
    <tr>
      <td class="left-align">{{ item.article.nom }}</td>
      <td>{{ item.quantite or 0 }}</td>
      <td>{{ "{:.2f}".format(item.article.prix_vente_HT or 0) }}€</td>
      <td>{{ "{:.2f}".format((item.quantite or 0) * (item.article.prix_vente_HT or 0)) }}€</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<table class="totals">
  <tr>
    <td>Total Hors Taxes</td>
    <td>{{ "{:.2f}".format(devis.montant_HT or 0) }}€</td>
  </tr>
  <tr>
    <td>Total TVA</td>
    <td>{{ "{:.2f}".format(devis.montant_TVA or 0) }}€</td>
  </tr>
  <tr>
    <td>Total TTC</td>
    <td>{{ "{:.2f}".format(devis.montant_TTC or 0) }} €</td>
  </tr>
</table>

<table class="payment-options">
  <tr><th colspan="2">Total TTC</th></tr>
  <tr>
    <td>Paiement direct</td>
    <td>{{ "{:.2f}".format(devis.montant_TTC or 0) }} €</td>
  </tr>
  <tr>
    <td>Location *</td>
    <td>25 € / mois</td>
  </tr>
</table>

<div class="payment-note" style="width: 100%;">
  * La location est soumise à un engagement de 18 mois à partir du premier paiement.<br />
  Un acompte de 10 % de la somme totale devra être versé lors du 1er paiement.
</div>

<p>Conditions générales de ventes :</p>

<footer>
  Artech Sécurité - 6, route Varennes 55840 Thierville sur Meuse
  <span class="page-number"></span>
</footer>

</body>
</html>
